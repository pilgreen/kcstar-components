---
layout: page
title: thumbnail-stack
permalink: /thumbnail-stack/
tags: graphics
excerpt: This element shows a series of images stack on top of each other.
img: img/thumbnail-stack.png
---

<section>
  <div id="items"></div>
</section>

<section class="horizontal center-justified layout">
  <button id="add" class="generate">add an item</button>
  <div class="spacer"></div>
  <button id="generate" class="generate">generate code</button>
</section>

<div id="settings" hidden>
  <section>
    <h3 class="title">Preview</h3>
    <div id="preview"></div>
  </section>

  <section>
    <label class="sans-cond">Copy this code</label>
    <textarea id="code" class="pre" readonly></textarea>
  </section>
</div>

<!-- templates -->
<template for="item">
  <div class="item">
    <label class="sans-cond">Image URL</label>
    <input type="text"></input>
    <label class="sans-cond">Content <small><a href="markdown-preview/" target="_blank">markdown enabled</a></small></label>
    <textarea></textarea>
  </div>
</template>

<template for="output">
  <thumbnail-stack>
    <img>
    <div class="thumbnail-stack-content"></div>
  </thumbnail-stack>
</template>

<!-- Page script -->
<script>
  var settings = document.querySelector('#settings');
  var preview = document.querySelector('#preview');
  var code = document.querySelector('#code');

  // Events
  document.addEventListener('DOMContentLoaded', addItem);
  document.querySelector('#add').addEventListener('click', addItem);
  document.querySelector('#generate').addEventListener('click', generateCode);

  function addItem() {
    var t = document.querySelector('template[for="item"]');
    var clone = document.importNode(t.content, true);
    document.querySelector('#items').appendChild(clone);
  }

  function generateCode() {
    var t = document.querySelector('template[for="output"]');
    var items = document.querySelectorAll('.item');
    var output = [];
    
    preview.innerHTML = '';

    for(var i = 0, len = items.length; i < len; i++) {
      var d = items[i];
      var img = d.querySelector('input').value;
      var content = d.querySelector('textarea').value

      t.content.querySelector('img').src = img;
      t.content.querySelector('div').innerHTML = marked(content);

      if(img && content) {
        preview.appendChild(document.importNode(t.content, true));
        output.push(t.innerHTML);
      }
    }

    code.value = sanitize(output.join("\n"));
    settings.removeAttribute('hidden');
  }
</script>

