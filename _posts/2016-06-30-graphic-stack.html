---
layout: page
title: graphic-stack
permalink: /graphic-stack/
tags: graphics
excerpt: The `graphic-stack` element provides structure for a single image in the body of a story.
---

<link rel="import" href="components/graphic-stack.html">

<label class="sans-cond">Image URL <small>(Desktop or single)</small></label>
<input type="text" class="space" name="desktopImage">

<label class="sans-cond">Image URL <small>(Mobile)</small></label>
<input type="text" class="space" name="mobileImage">

<div class="horizontal space layout">
  <div class="flex">
    <label class="sans-cond">Content</label>
    <textarea name="content"></textarea>
  </div>
  <div class="flex" style="padding-left: 0.5rem;">
    <label class="sans-cond underline">Markdown preview</label>
    <graphic-stack id="markup" style="margin: 0.5rem 0; overflow: auto"></graphic-stack>
  </div>
</div>

<label class="sans-cond">Positioning</label>
<div class="horizontal layout space">
  <label><input type="radio" name="position" value="full" checked>full</label>
  <label><input type="radio" name="position" value="left">left</label>
  <label><input type="radio" name="position" value="right">right</label>
</div>

<button class="generate">generate code</button>

<div id="settings" hidden>
  <div id="preview" class="clearfix"></div>
  <label class="sans-cond">Copy this code</label>
  <textarea id="code"></textarea>
</div>

<!-- Template content -->
<template>
  <graphic-stack>
    <img class="desktop">
    <img class="mobile">
    <div class="content"></div>
  </graphic-stack>
</template>

<!-- Page script -->
<script>
  document.querySelector('button').addEventListener('click', handleClick);
  document.querySelector('textarea[name="content"]').addEventListener('input', previewMarkdown);
  var markup = document.querySelector('#markup');

  function handleClick() {
    var v = {
      desktop: document.querySelector('input[name="desktopImage"]').value,
      mobile: document.querySelector('input[name="mobileImage"]').value,
      content: marked(document.querySelector('textarea[name="content"]').value),
      position: document.querySelector('input[name="position"]:checked').value
    }

    var t = document.querySelector('template');
    var stack = t.content.querySelector('graphic-stack');
    var preview = document.querySelector('#preview');

    stack.setAttribute('position', v.position);
    stack.querySelector('.desktop').src = v.desktop ? v.desktop : '';
    stack.querySelector('.mobile').src = v.mobile ? v.mobile : '';
    stack.querySelector('.content').innerHTML = v.content;

    while(preview.firstChild) {
      preview.removeChild(preview.firstChild);
    }

    var clone = document.importNode(t.content, true);
    preview.appendChild(clone);

    document.querySelector('#code').value = formatCode(preview.innerHTML, ['components/graphic-stack.html']);
    document.querySelector('#settings').removeAttribute('hidden');
  }

  function previewMarkdown(e) {
    markup.innerHTML = marked(e.target.value);
  }
</script>

