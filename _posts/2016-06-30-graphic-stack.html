---
layout: page
title: graphic-stack
permalink: /graphic-stack/
tags: graphics
excerpt: This element shows a single image in the body of a story.
img: img/graphic-stack.png
---

<link rel="import" href="bower_components/iron-selector/iron-selector.html">
<link rel="import" href="components/graphic-stack.html">

<section>
  <label>Image URL <small>Desktop or single</small></label>
  <input type="text" name="desktopImage">

  <label>Image URL <small>Mobile</small></label>
  <input type="text" name="mobileImage">

  <div class="horizontal layout">
    <div class="flex">
      <label>Content <small>markdown enabled</small></label>
      <textarea name="content"></textarea>
    </div>
    <div class="flex" style="padding-left: 0.5rem;">
      <label class="underline">Content preview <small>not styled</small></label>
      <graphic-stack id="markup" style="margin: 0.5rem 0; overflow: auto"></graphic-stack>
    </div>
  </div>

  <label>Positioning</label>
  <iron-selector id="position" class="horizontal layout" attr-for-selected="name" selected="full">
    <span class="button" name="full">full</span>
    <span class="button" name="left">left</span>
    <span class="button" name="right">right</span>
  </iron-selector>
</section>

<section class="horizontal center-justified layout">
  <button class="generate">generate code</button>
</section>

<div id="settings" hidden>
  <section>
    <h3 class="title">Preview</h3>
    <div id="preview" class="clearfix"></div>
  </section>

  <section>
    <label>Copy this code</label>
    <textarea id="code"></textarea>
  </section>
</div>

<!-- Template content -->
<template>
  <graphic-stack>
    <img class="desktop">
    <img class="mobile">
    <div class="graphic-stack-content"></div>
  </graphic-stack>
</template>

<!-- Page script -->
<script>
  var settings = document.querySelector('#settings');
  var preview = document.querySelector('#preview');
  var code = document.querySelector('#code');
  var markup = document.querySelector('#markup');

  // Events
  document.querySelector('button').addEventListener('click', handleClick);
  document.querySelector('textarea[name="content"]').addEventListener('input', previewMarkdown);

  function handleClick() {
    var v = {
      desktop: document.querySelector('input[name="desktopImage"]').value,
      mobile: document.querySelector('input[name="mobileImage"]').value,
      content: marked(document.querySelector('textarea[name="content"]').value),
      position: document.querySelector('#position').selected
    }

    var t = document.querySelector('template');
    var stack = t.content.querySelector('graphic-stack');
    var desktop = stack.querySelector('.desktop');
    var mobile = stack.querySelector('.mobile');
    var content = stack.querySelector('.graphic-stack-content');

    stack.setAttribute('position', v.position);
    desktop.src = v.desktop ? v.desktop : '';
    desktop.classList.toggle('single', !v.mobile)
    mobile.src = v.mobile ? v.mobile : '';
    mobile.classList.toggle('hidden', !v.mobile);
    content.innerHTML = v.content;

    preview.innerHTML = '';
    preview.appendChild(document.importNode(t.content, true));

    code.value = formatCode(t.innerHTML, ['components/graphic-stack.html']);
    settings.removeAttribute('hidden');
  }

  function previewMarkdown(e) {
    markup.innerHTML = marked(e.target.value);
  }
</script>

